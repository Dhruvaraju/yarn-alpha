# yarn-alpha

Yarn dependency management learning log

## What is yarn?

- A package manager
- Yarn provides the below mentioned advantages when compared to other package managers

  - **Offline Caching**: Once installed from npm from next time onwards these will be installed from local.
  - **Deterministic** : packages will be installed in same way if you are using same version of yarn.
  - **Network Performance**: network requests from Yarn are queued to maximize network utilization
  - **Network resilience**: if one request fails, it does not stop the whole install. Previously with NPM, if you couldn't get one package you were trying to install, the whole install would fail
  - **Flat node modules**: This keeps mismatching package versions from creating duplicates in the node modules and hoists packages to the top of the node modules, reducing the size of your total dependencies

  > Yarn and npm has different syntax, example npm install is equal to yarn add

  ### Yarn Features:

  #### Offline mirroring

  - Loads the dependency files to a local folder stored with tar extension which will be used not only for one project but for multiple projects.
  - This increases faster inter team installs and no access to internet after the first time.

  #### Workspaces:

  - Mono repo integration which is a concept originated from facebook. small projects are groups together to form a monorepo. Each project is called as a workspace.
  - Shared dependencies are kept in main directory called as monorepo all other projects can be invoked individually.

#### Auto-merging lock files

- Better version control integration and easy to resolve conflicts
  > yarn supports 2 factor authentication

> Npx is a command which ships with npm used to invoke other functionalities or package binaries like npx grunt.

## Installing yarn

- Yarn requires node js installation
- to install yarn globally `npm install -g yarn` or you can install through an msi
- `yarn -v` to check version of yarn installed.

## Adding and removing packages

- **yarn add** for adding new package
- **yarn remove** for removing a package

### Yarn add example

- Adding new package will create a node_modules folder, package.json, yarn.lock file
- if you do not want git to track node_modules folder add a .gitignore file
- Package.json will contain a json like below, general syntax: `yarn add express`

```
{
  "dependencies": {
    "express": "^4.17.1"
  }
```

- yarn.lock file will have packages, where they are downloaded from and a integrity hash

```
array-flatten@1.1.1:
  version "1.1.1"
  resolved "https://registry.yarnpkg.com/array-flatten/-/array-flatten-1.1.1.tgz#9a5f699051b1e7073328f2a008968b64ea2955d2"
  integrity sha1-ml9pkFGx5wczKPKgCJaLZOopVdI=
```

### Removing package 'yarn remove'

- general syntax for removing packages ` yarn remove express` will remove express.
- After removal the dependencies in package.json will be updated.
- yarn lock file will remove all the dependency references
- node_modules will have only an integrity file.

## What is the significance of package.json

- Every time when we add a new package or remove a package package.json will be updated.
- The corresponding dependencies will be downloaded, in node modules.
- if we remove node modules folder or download a new project from version control we need to set up all the dependencies.
- To do so we can use `yarn install` or `yarn` command as yarn default switch is install.
- To generate a package.json with all default attributes to start a project use `yarn init`
- a package.json generated by **yarn init** will look like below

```
{
  "name": "yarn-pilot-project",
  "version": "1.0.0",
  "description": "pilot project to learn yarn",
  "main": "index.js",
  "author": "dhruva",
  "license": "MIT"
}
```

- Once dependencies are added they will be added in package.json and node_modules will be downloaded.
